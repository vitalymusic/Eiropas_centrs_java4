<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>
    <title>Document</title>
</head>
<body>
    <h1>Formu apstrāde ar JS</h1>
    <form action="https://jsonplaceholder.typicode.com/posts" method="post">
        <!-- 
            https://jsonplaceholder.typicode.com/posts
            1. Lietotāja vārds, uzvārds un arī epasts tālrunis
            2. Lietotāja Piegādes adrese (pilsēta), Iela, mājas numurs, pasta indekss
            3. Paldies par pasūtījumu
         -->
         <div class="container">
            <div class="step step1" >
                <div class="mb-3">
                    <label for="nameInput" class="form-label">
                        Jūsu vārds</label>
                    <input type="text" class="form-control" id="nameInput">
                </div>
                <div class="mb-3">
                    <label for="surnameInput" class="form-label">
                        Jūsu uzvārds</label>
                    <input type="text" class="form-control" id="surnameInput">
                </div>
                <div class="mb-3">
                    <label for="mailInput" class="form-label">
                        Jūsu epasts</label>
                    <input type="text" class="form-control" id="mailInput">
                </div>
                <div class="mb-3">
                    <label for="phoneInput" class="form-label">
                        Jūsu tālrunis</label>
                    <input type="text" class="form-control" id="phoneInput">
                </div>
                <div class="mb-3">
                    <button type="button" class="btn btn-primary nextStep">Nākošais solis</button>
                </div>
                
            </div>
            <div class="step step2" >
                <div class="row ">

                
                <div class="col-md-5">
                    <label for="cityInput" class="form-label">
                        Pilsēta</label>
                            <!-- Pielikt no saraksta -->
                    <input type="text" class="form-control" id="cityInput">
                </div>
                <div class="col-md-5">
                    <label for="streetInput" class="form-label">
                        Iela un mājas numurs</label>
                    <input type="text" class="form-control" id="streetInput">
                </div>
                <div class="col-md-2">
                    <label for="postInput" class="form-label">
                        Pasta indekss</label>
                    <input type="text" class="form-control" id="postInput" placeholder="piem.: LV-1001">
                </div>
                <div class="mb-3 mt-3">
                    <button type="button" class="btn btn-primary makeOrder">Veikt pasūtījumu</button>

                </div>
            </div>
        </div>
            <div class="step step3" >
                <div class="alert alert-info mt-5" role="alert">
                    <h1 class="text-center">Paldies par pasūtījumu!</h1>  
                  </div>
                     
            </div>
         </div>
         

    </form>


    <script>
        var form = document.querySelector("form"),
            step1 = document.querySelector(".step1"),
            step2 = document.querySelector(".step2"),
            step3 = document.querySelector(".step3"),
            nextStepBtn = document.querySelector(".nextStep");
            makeOrderBtn = document.querySelector(".makeOrder");


            step2.style.display = "none";
            step3.style.display = "none";

            formError = false;
            // console.log(step1.querySelectorAll("input"));

            nextStepBtn.onclick = ()=>{
                step1.querySelectorAll("input").forEach(function(input){
                    if(input.value.length <3 ){
                        formError = true;
                        input.classList.add("is-invalid");
                        input.classList.remove("is-valid");
                    }else{
                        formError = false;
                        input.classList.remove("is-invalid");
                        input.classList.add("is-valid");

                        setTimeout(()=>{
                            step2.style.display = "block";
                            step1.style.display = "none";
                        },2000)
                    }
                })
            }

            makeOrderBtn.onclick = ()=>{
                step2.querySelectorAll("input").forEach(function(input){
                    if(input.value.length <3 ){
                        formError = true;
                        input.classList.add("is-invalid");
                        input.classList.remove("is-valid");
                    }else{
                        formError = false;
                        input.classList.remove("is-invalid");
                        input.classList.add("is-valid");

                        if(formError == false){
                            setTimeout(()=>{
                            step2.style.display = "none";
                            step3.style.display = "block";
                            setTimeout(()=>{
                                form.submit(); 
                            },2000);
                        },2000);
                        }
                        
                    }
                })
            }



    </script>
</body>

</html>